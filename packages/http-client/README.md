# @vite-mf-monorepo/tmdb-client

TMDB API HTTP client generated with [heyAPI](https://heyapi.dev) from the official [OpenAPI specification](https://developer.themoviedb.org/openapi/tmdb-api.json).

## Features

- **Type-safe**: All endpoints and responses are fully typed
- **TanStack Query integration**: Generated query options for React Query
- **Fetch API**: Lightweight client based on native Fetch API
- **Auto-generated**: Regenerate anytime with `pnpm generate`

## Installation

This package is part of the monorepo. Dependencies are managed at the workspace level.

```bash
pnpm install
```

## Usage

### SDK Functions

```typescript
import { moviePopularList, movieDetails } from '@vite-mf-monorepo/tmdb-client'

// Get popular movies
const { data } = await moviePopularList({ query: { page: 1 } })

// Get movie details
const { data: movie } = await movieDetails({ path: { movie_id: 550 } })
```

### With TanStack Query

```typescript
import { useQuery } from '@tanstack/react-query'
import { moviePopularListOptions, movieDetailsOptions } from '@vite-mf-monorepo/tmdb-client'

// In a React component
const { data, isLoading } = useQuery(moviePopularListOptions({ query: { page: 1 } }))

const { data: movie } = useQuery(movieDetailsOptions({ path: { movie_id: 550 } }))
```

## Configuration

The client is configured in `src/tmdb-config.ts`:

- **Base URL**: `https://api.themoviedb.org`
- **Authentication**: Bearer token from `VITE_TMDB_API_KEY` environment variable

### Environment Variables

Create a `.env.local` file at the monorepo root:

```env
VITE_TMDB_API_KEY=your_tmdb_api_key_here
```

## Regenerating the Client

If the TMDB OpenAPI spec changes, regenerate the client:

```bash
pnpm --filter @vite-mf-monorepo/tmdb-client generate
```

## File Structure

```
packages/http-client/
├── src/
│   ├── client/              # Generated by heyAPI (do not edit)
│   │   ├── client.gen.ts    # HTTP client instance
│   │   ├── sdk.gen.ts       # SDK functions
│   │   ├── types.gen.ts     # TypeScript types
│   │   └── tanstack-query.gen.ts  # TanStack Query options
│   ├── tmdb-config.ts       # Runtime configuration (auth, baseUrl)
│   └── index.ts             # Package entry point
├── openapi-ts.config.ts     # heyAPI configuration
├── package.json
└── tsconfig.json
```

## Links

- [TMDB API Documentation](https://developer.themoviedb.org/docs)
- [heyAPI Documentation](https://heyapi.dev)
- [TanStack Query](https://tanstack.com/query)
